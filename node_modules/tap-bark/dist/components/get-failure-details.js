"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const react_1 = __importDefault(require("react"));
const ink_1 = require("ink");
const failure_detail_1 = require("./failure-detail");
function getFailureMessage(assertion) {
    const failureTitle = react_1.default.createElement(ink_1.Box, null,
        react_1.default.createElement(ink_1.Text, { bold: true },
            react_1.default.createElement(ink_1.Color, { red: true }, "FAIL:"),
            " ",
            assertion.name));
    if (assertion.diag) {
        const data = assertion.diag.data;
        const details = data.details;
        const title = react_1.default.createElement(ink_1.Box, { flexDirection: "column" },
            failureTitle,
            react_1.default.createElement(ink_1.Box, null, assertion.diag.message));
        if (details && Object.keys(details).length > 0) {
            return (react_1.default.createElement(react_1.default.Fragment, null,
                title,
                Object.keys(details)
                    .map((key, index) => react_1.default.createElement(ink_1.Box, { padding: 1, flexDirection: "column", key: `failure-detail-${index}` },
                    react_1.default.createElement(failure_detail_1.FailureDetail, { name: key, value: details[key] })))));
        }
        return react_1.default.createElement(react_1.default.Fragment, null,
            title,
            react_1.default.createElement(failure_detail_1.FailureDetail, { name: "expected", value: data.expect }),
            react_1.default.createElement(failure_detail_1.FailureDetail, { name: "actual", value: data.got }));
    }
    return react_1.default.createElement(react_1.default.Fragment, null,
        failureTitle,
        "Failure reason unknown.");
}
exports.getFailureMessage = getFailureMessage;
//# sourceMappingURL=get-failure-details.js.map